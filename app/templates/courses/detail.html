{% extends "base.html" %}


{% block content %}
<h3>–£—Ä–æ–∫–∏</h3>
<ul>
  {% for lesson in course.lessons %}
    <li>
      <a href="{{ url_for('lessons.lesson_detail', lesson_id=lesson.id) }}">{{ lesson.title }}</a>

        <form method="post" action="{{ url_for('courses.complete_lesson', lesson_id=lesson.id) }}" style="display: inline;">
            {% set progress = lesson.user_progress | selectattr("user_id", "equalto", current_user.id) | first %}
            {% if progress and progress.completed %}
                <button type="submit">‚úÖ –ü—Ä–æ–π–¥–µ–Ω</button>
                <a href="{{ url_for('courses.subscribe', course_id=lesson.id) }}">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª</a>
            {% else %}
                <button type="submit">üî≤ –ù–µ –ø—Ä–æ–π–¥–µ–Ω</button>
                <a href="{{ url_for('courses.subscribe', course_id=lesson.id) }}">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫—É—Ä—Å</a>
            {% endif %}
        </form>
    </li>
  {% endfor %}
  <h2>{{ course.title }}</h2>
    <p>–ü—Ä–æ–≥—Ä–µ—Å—Å: {{ progress }}%</p>

    <div style="background-color: #ddd; width: 100%; height: 20px; border-radius: 5px;">
        <div style="width: {{ progress }}%; height: 100%; background-color: #4caf50; border-radius: 5px;"></div>
    </div>
</ul>
{% endblock content %}